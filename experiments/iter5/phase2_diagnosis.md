# iter5 Phase 2: 失败模式分解

## 基线: B12 (B09+B10+B11+B12) — 实际 run_7bench 数据

| 合约 | PnL(pts) | Trades | Sharpe |
|------|----------|--------|--------|
| p2601 | +1239.8 | 132 | 2.70 |
| p2405 | +942.9 | 141 | 2.68 |
| p2209 | +7109.8 | 118 | 4.36 |
| p2501 | +515.8 | 287 | 0.77 |
| p2505 | +448.1 | 126 | 1.37 |
| p2509 | +137.2 | 123 | 0.67 |
| p2301 | -604.9 | 112 | -2.52 |

**TOTAL: 9788.6 pts | 除p2209: 2678.8 pts | 目标>5600 | 缺口2921**

> 注：Phase 2 diagnosis.json 的详细统计数据(PF/WinRate等)来自 diagnose_trades.py，
> 与 run_7bench.py 的 pts 计算口径存在差异（round-trip vs vnpy engine），
> 以 run_7bench 为准。

## iter4 教训（不可重复的失败方向）
1. ❌ 做空 → p2209从+7110→-241
2. ❌ 全局trade_interval → 伤趋势合约
3. ❌ daily_loss_limit过低 → 拦截好交易
4. ❌ 15m diff>0 → p2209变负
5. △ 中枢状态机 → 仅+113，不够

## 失败模式分析

### 模式1: p2301 结构性亏损（下跌做多）
- 14连亏-418pts, Win% 23.6%
- 行情下跌7.8%，做多必亏
- **不可通过信号优化修复**，只能降频/停做
- 潜力: 从-605→0 = +605pts（停做）或从-605→-200 = +405pts（大幅降频）

### 模式2: p2501 手续费吞噬（过度交易）
- 140 trades / 163天 = 0.86笔/天
- 但PnL=+1402 with PF=1.70，说明信号本身有价值
- 关键: 能否在不伤好交易的前提下砍掉最差的30-40笔?
- 潜力: 减少30笔亏损交易 × 24.2平均亏损 = +726pts减亏 - 手续费节省
- 但要注意：iter4中trade_interval=6导致p2501从606→113，全局降频不可行

### 模式3: 弱合约赢利不足（p2509/p2405）
- p2509: PF=1.52, avg_win=42.5 → 赢的不够大
- p2405: PF=1.88但10连亏-170 → 连亏段吃利润
- 潜力: 提高avg_win 10pts → p2509: +244, p2405: +250

### 模式4: 共性连亏段
- 所有合约4-14连亏
- 但不能用全局冷却（iter4已证明）
- 需要更智能的方式: 基于结构状态的选择性停火

## 缺口分解（需要+2921pts）

| 来源 | 目标合约 | 预期提升 | 方式 |
|------|----------|----------|------|
| 停做/大幅降频 | p2301 | +400~600 | 上级别趋势过滤 |
| 智能降频 | p2501 | +300~800 | 仅在中枢内/震荡时降频，趋势时不限 |
| 提高盈亏比 | p2509 | +200~500 | trailing优化 |
| 减少连亏 | p2405 | +100~300 | 结构位过滤 |
| 微调 | p2601/p2505 | +100~200 | 参数优化 |
| **合计** | | **+1100~2400** | |

**关键差距**: 即使全部达到高位估计(2400)，仍可能差~500pts
→ 需要更根本的信号质量提升或发现新的改进方向
