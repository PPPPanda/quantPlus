# iter3 Phase 3: 改动 Backlog

## 排序原则
按"可落地性 × 预期收益 / 风险"排序，低改动半径优先

## Backlog

### R1: 背驰逻辑修正 (2B/2S MACD面积比较)
- **来源**: 审计P0 #2
- **失败模式**: 2B追涨入场、2S退出滞后
- **方案**: 比较两段同向走势的MACD柱体面积（sum of |hist|），面积缩小→背驰
- **代码改动**: `_check_signal()` 中 2B/2S 条件
- **改动半径**: 中（需要累积MACD面积的基础设施）
- **预期**: p2501降频（减少追涨信号）、p2401减少错误入场

### R2: 止损参数化 (ATR-based)
- **来源**: 审计P1 #3
- **方案**: 止损 = stop_base ± max(pricetick, atr × stop_buffer_pct)
- **代码改动**: `_open_position()` 中 stop_price 计算
- **改动半径**: 低（一行改动）
- **预期**: 减少被噪音扫出

### R3: 中枢状态机 (forming/active/left)
- **来源**: 审计P0 #1
- **方案**: 中枢确立后固定zg/zd，后续笔判断延伸/离开
- **代码改动**: 重写 `_update_pivots()` + 新增中枢状态管理
- **改动半径**: 高（核心结构变更）
- **预期**: 中枢稳定、减少伪信号、p2501降频
- **风险**: 最高，可能导致信号大幅减少或p2209退化

### R4: 3B/3S 结构链完善
- **来源**: 审计P1 #4
- **方案**: 绑定中枢生命周期：离开→回抽→不破确认
- **依赖**: R3
- **改动半径**: 中

### R5: 15m 过滤增强
- **来源**: 审计P1 #5  
- **方案**: 增加15m笔方向或中枢状态判断
- **依赖**: R3
- **改动半径**: 中

## 执行计划
- Round 1: R2 (止损参数化) — 最安全，独立改动
- Round 2: R1 (背驰修正) — 中等改动，独立
- Round 3: R3 (中枢状态机) — 高风险，核心重构
- Round 4: R4 + R5 (依赖R3的后续优化)
