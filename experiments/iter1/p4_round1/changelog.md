# Phase 4 Round 1: B01 空头信号过滤

## 改动
- **3S**: 增加 `self._prev_diff_15m < 0` 过滤（15m MACD diff 必须在零轴下方才做空）
- **2S**: 增加 `self._prev_diff_15m < 0` 过滤（同上）
- 原理：空头信号只在大级别明确下跌（15m diff < 0）时才执行

## 实验过程
| 版本 | 改动 | p2601 | p2405 | p2209 | 合计 |
|------|------|-------|-------|-------|------|
| baseline | - | +11526 | -865 | -19357 | -8695 |
| v1 (3S→CloseLong + 2S+diff5m<0) | 3S平多+2S加过滤 | 8355 | -381 | -17578 | -9604 |
| v2 (仅禁用3S) | 3S完全禁用 | **12162** | -2864 | -19357 | -10059 |
| v3 (3S+2S都加diff5m<0) | 5m MACD过滤 | 8278 | **1618** | -17578 | -7682 |
| **v4 (3S+2S加diff15m<0)** | **15m MACD过滤** | **9909** | **2588** | **-10505** | **+1992** |
| v5 (仅2S加diff15m<0) | 只改2S | 11710 | 1493 | -22273 | -9070 |

## 选择 v4 的理由
- 合计 PnL 从 -8695 → +1992（改善 +10687）
- p2405 翻正 (+2588)，p2209 大幅改善 (-10505 vs -19357)
- p2601 有退化 (-1617) 但仍然 Sharpe > 2.0
- 交易次数减少 (259+273+243=775 → 219+201+203=623)，降频 20%

## 关键发现
- 15m diff < 0 是比 5m diff < 0 更好的空头过滤器（粒度更粗、更稳定）
- 3S 和 2S 必须同时过滤（只改一边会导致路径依赖问题）
- 完全禁用 3S 会恶化 p2405（路径依赖效应）

## 当前距目标
- 合计点数: +199.2（目标 ≥ 2400）
- 差距: 约 2200 点
