# iter11 Phase 1: 做多做空对称性审计

## 代码对称性检查

### 信号生成层 (_check_signal)
- **3B 买点** (Buy): 向上离开中枢 + 回踩不破ZG + 15m多头 → **只生成 Buy**
- **3S 卖点** (CloseLong): 向下离开中枢 + 回抽不破ZD + 15m空头 → **只生成 CloseLong（平多）**
- **2B** (Buy): 低点抬高 + 背驰 + 15m多头 → **只开多**
- **2S** (CloseLong): 高点降低 + 背驰 + 15m空头 → **只平多**
- **S6 底背驰** (Buy): 价格更低但面积衰减 → **只开多**

### 信号执行层 (_check_entry_1m)
- Buy → `self.buy()` 开多
- CloseLong → `self.sell()` 平多
- Sell → 代码存在但**永远不会被触发**（信号层不生成 Sell）

### 风控层
- 多头止损: bar.low <= stop → 平多
- 空头止损: 代码存在但**不会被使用**

### 结论: 当前策略是**纯做多策略**
3S/2S 信号只用于平仓，不用于开空。这是正确的设计。

## 做空为何不可行（历史分析）

### iter4 实验结果
棕榈油做空系统性亏损。根本原因分析:

1. **商品期货的长期上涨偏好 (Long Bias)**:
   - 棕榈油作为大宗商品，受通胀、货币贬值影响，长期有上涨趋势
   - 做多顺大趋势，做空逆大趋势

2. **下跌动力学与上涨不同**:
   - 上涨: 趋势性强，持续时间长（资金持续流入推动）
   - 下跌: 通常是恐慌性快速下跌（V字反转多），不利于趋势跟踪
   - 下跌后反弹快，trailing stop 来不及锁住利润

3. **缠论中枢在下跌中的行为**:
   - 下跌趋势中中枢形成频率低（快速跌穿不形成中枢）
   - 3S 信号在下跌中难以产生有效中枢结构
   - 而上涨趋势中中枢结构清晰，3B 信号质量高

4. **MACD 在下跌中的表现**:
   - 下跌趋势中 MACD 经常出现假金叉（快速反弹触发），导致错误平仓
   - 15m MACD diff < dea 持续时间短，空头过滤条件不稳定

### 这是否合理？
**完全合理**。纯做多是对棕榈油期货的最优策略:
- 利用长期上涨偏好
- 缠论 3B/2B 信号在上涨趋势中更可靠
- 3S/2S 仅作为平仓信号，降低了下跌风险但不暴露做空风险

## iter11 研究方向

既然做多/做空分析结论明确，iter11 转向:
- 探索 cooldown_losses 微调
- 探索 div_mode 变化（当前 mode=1 是 OR 模式）
