# Phase 1: 节假日跳空对缠论结构影响审计

## 1. 数据概览

| 指标 | 值 |
|------|-----|
| 合约数 | 13 |
| 显著节假日跳空（>3 ATR, >48h） | 119 |
| 被包含处理合并 | 4 (3.4%) |
| **影响分型构建** | **67 (56.3%)** |

## 2. 关键发现

### 2.1 跳空幅度 vs 分型影响率

| Gap 范围 | 数量 | 影响分型 | 比例 |
|----------|------|----------|------|
| 3-5x ATR | 54 | 34 | **63%** |
| 5-10x ATR | 54 | 27 | 50% |
| 10-20x ATR | 6 | 4 | 67% |
| 20-50x ATR | 4 | 2 | 50% |
| >50x ATR | 1 | 0 | **0%** |

**结论**：**中等跳空(3-10x ATR)最危险**，极大跳空反而安全

### 2.2 问题合约分析

| 合约 | 跳空数 | 分型影响 | 比例 |
|------|--------|----------|------|
| p2401 | 11 | 9 | **82%** |
| p2309 | 8 | 6 | 75% |
| p2305 | 7 | 5 | 71% |

p2401 是策略最难盈利的合约（唯一 FAIL），现在发现它的节假日跳空分型影响率也最高。

### 2.3 方向性分析

| 方向 | 数量 | 影响分型 | 比例 |
|------|------|----------|------|
| 跳空高开 | 59 | 32 | 54% |
| 跳空低开 | 60 | 35 | 58% |

方向差异不显著。

## 3. 当前策略的跳空处理（S26）

```python
# 现有参数
gap_extreme_atr: float = 3.0   # 极端跳空阈值
gap_cooldown_bars: int = 3     # 冷却期（5m bar）

# 现有逻辑
if gap > gap_extreme_atr * atr:
    _gap_cooldown_remaining = gap_cooldown_bars
    # 冷却期内跳过信号生成
```

### 3.1 问题分析

1. **阈值过低**：3.0 ATR 会触发所有显著跳空，但极大跳空(>50x)反而是安全的
2. **冷却期过短**：3 根 5m bar = 15 分钟，而分型影响可能持续更久
3. **只冷却，不修复**：没有尝试修复被跳空污染的分型结构

### 3.2 缠论理论视角

根据缠论108课：
- 分型是基于"高低点比较"的局部极值
- 跳空K线可能创造"伪极值"（不是市场连续博弈的结果）
- 笔的构建依赖分型交替，伪分型会导致伪笔
- 伪笔进一步影响中枢识别

## 4. 改动建议（按优先级）

### 4.1 低改动半径（调参）

| 方案 | 改动 | 预期效果 | 风险 |
|------|------|----------|------|
| S26a | gap_cooldown_bars: 3→6 | 延长冷却 | 可能错过机会 |
| S26b | 分级冷却：3-10x→6bar, 10-30x→3bar, >30x→0bar | 精准控制 | 复杂度增加 |

### 4.2 中改动半径（信号过滤）

| 方案 | 改动 | 预期效果 | 风险 |
|------|------|----------|------|
| S29 | 跳空后分型需二次确认 | 过滤伪分型 | 延迟入场 |
| S30 | 跳空后重置包含方向 | 避免方向污染 | 结构断裂 |

### 4.3 高改动半径（结构重建）

| 方案 | 改动 | 预期效果 | 风险 |
|------|------|----------|------|
| S31 | 跳空后清空最近N个K线，从新起点重建 | 完全隔离 | 丢失有效信息 |
| S32 | 跳空K线不参与分型判断（跳过） | 消除伪极值 | 笔间隔失真 |

## 5. 推荐实施顺序

1. **Phase 4 小循环 1**：S26b 分级冷却
2. **Phase 4 小循环 2**：S29 二次确认（如果小循环1效果不佳）
3. **Phase 4 小循环 3**：S30 方向重置（如果小循环2效果不佳）

## 6. 下一步

- 等待 Gemini/GPT 子代理的理论分析
- 实施 S26b 并回测
- 对比 13 合约的改善/退化情况
