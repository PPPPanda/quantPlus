# S29 节假日前平仓实验报告

## 状态：❌ 失败

## 实验目的
验证"节假日前主动平仓"是否能改善整体收益，规避节后跳空风险。

## 实验设计
- 参数：`holiday_close_enabled=True, holiday_close_minutes=30`
- 逻辑：在重大节假日前最后一个交易日，收盘前30分钟强制平仓
- 覆盖假期：春节、清明、劳动节、端午、中秋、国庆（2021-2026）

## 实验结果

### 回测对比（13合约）

| 合约 | 基线(pts) | S29启用(pts) | Delta | 说明 |
|------|-----------|--------------|-------|------|
| p2201 | -301.9 | -301.9 | 0 | |
| p2205 | +1880.5 | +1880.5 | 0 | |
| p2209 | +7526.2 | **+7617.8** | **+91.6** | ✓ 避免了劳动节跳空亏损 |
| p2301 | +112.2 | **-115.8** | **-228.0** | ⚠️ 错过了国庆后大行情 |
| p2305 | -112.7 | -104.7 | +8.0 | |
| p2309 | -143.4 | -143.4 | 0 | |
| p2401 | -784.5 | -784.5 | 0 | |
| p2405 | +905.0 | +905.0 | 0 | |
| p2501 | +385.5 | **+461.5** | **+76.0** | ✓ |
| p2505 | +1526.7 | **+1096.8** | **-429.9** | ⚠️ 错过了清明后大行情 |
| p2509 | +995.0 | **+853.0** | **-142.0** | ⚠️ |
| p2510 | +157.1 | **+263.1** | **+106.0** | ✓ |
| p2601 | +1037.9 | +1037.9 | 0 | |
| **TOTAL** | **13183.6** | **12665.2** | **-518.4** | ❌ |

### 汇总
- 改善合约：p2209 (+91.6), p2501 (+76.0), p2510 (+106.0) = **+273.6 pts**
- 退化合约：p2505 (-429.9), p2301 (-228.0), p2509 (-142.0) = **-799.9 pts**
- **净损失：-518.4 pts**

## 失败原因分析

### 1. 违背统计规律
iter17 分析已证明：
- 节假日向上跳空：15次，平均 +174 pts
- 节假日向下跳空：13次，平均 -100 pts
- **做多策略持仓过节有正期望**

S29 强制平仓违背了这个统计规律，放弃了正期望。

### 2. 获利/亏损不对称
- 规避的亏损：较少（p2209 劳动节 -210 pts）
- 错过的利润：更多（p2505 清明后、p2301 国庆后大行情）

### 3. 策略性质
该策略是趋势跟随策略，依赖"让利润奔跑"。节前平仓相当于强制截断趋势。

## 结论

**S29 不可行**。对于做多策略，持仓过节有正期望，不应强制平仓。

## 后续建议

1. **不采用 S29** — 默认禁用 `holiday_close_enabled=False`
2. **保留 S26 极端跳空安全网** — 只在开盘大跳空时被动保护
3. **考虑 S29b 变体** — 仅在浮亏状态下节前平仓（规避被套过节）

---

## 代码状态
- S29 功能保留在代码中
- 默认禁用：`holiday_close_enabled=False`
- 如需启用：`holiday_close_enabled=True`
